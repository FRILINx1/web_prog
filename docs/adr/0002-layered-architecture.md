# 0002-layered-architecture: Шарова архітектура

| Атрибут | Значення |
| :--- | :--- |
| **Дата** | 2025-12-03 |
| **Статус** | Прийнято |
| **Рішення** | Використовувати тришарову архітектуру: **API**, **Service (Use Case)**, **Domain**. |
| **api/** | Містить роути/контролери (Flask). Відповідає за: 1. Прийом HTTP-запитів. 2. Мапінг HTTP-даних на DTO. 3. Виклик методів у шарі **Service**. 4. Форматування HTTP-відповідей (включаючи коди та помилки). **Не містить бізнес-логіки.** |
| **service/** | Містить сервіси (Use Cases). Відповідає за: 1. Бізнес-валідацію. 2. Виконання бізнес-операцій. 3. Керування транзакціями (виклики до БД/Repository). 4. Мапінг DTO ↔ Domain. |
| **domain/** | Містить основні сутності (**User**, **Task**), їхні інваріанти та базові операції. **Не знає про Flask чи HTTP.** |
| **Напрямок залежностей** | API $\rightarrow$ Service $\rightarrow$ Domain. Залежності суворо односторонні. |
| **Заборонені зв'язки** | API не повинен безпосередньо взаємодіяти з базою даних. Вся логіка доступу до даних має відбуватися через Service. |
